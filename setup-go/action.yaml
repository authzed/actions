---
name: "Setup Go environment"
description: "Setup a Go environment and add it to the PATH (with caching!)"
inputs:
  go-version:
    description: "The Go version to download (if necessary) and use. Supports semver spec and ranges."
    default: "1.22.1"
  go-version-file:
    description: "Path to the go.mod or go.work file."
  cache-dependency-path:
    description: "Used to specify the path to a dependency file - go.sum"
  working-directory:
    description: "The directory with the root of the project"
    default: "."
    required: "false"
runs:
  using: "composite"
  steps:
    - uses: "buildjet/setup-go@v4"
      with:
        go-version: "${{ inputs.go-version }}"
        go-version-file: "${{ inputs.go-version-file }}"
        cache-dependency-path: "${{ inputs.cache-dependency-path }}"
        cache: "true"
    - name: "Run Go Mod Download"
      working-directory: "${{ inputs.working-directory }}"
      shell: "bash"
      run: "go mod download"
